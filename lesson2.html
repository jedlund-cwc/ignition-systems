<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Lesson: Automotive Ignition Diagnosis</title>
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #34495e;
            --success: #27ae60;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f4f7f6;
            color: #333;
        }

        /* Header */
        header {
            background-color: var(--primary);
            color: white;
            padding: 2rem 0;
            text-align: center;
        }

        header h1 { margin: 0; font-size: 2.5rem; }
        header p { margin-top: 0.5rem; opacity: 0.8; }

        /* Container */
        .container {
            max-width: 900px;
            margin: 2rem auto;
            padding: 0 1rem;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        /* Tabs Navigation */
        .tabs {
            display: flex;
            background: var(--dark);
        }

        .tab-btn {
            flex: 1;
            padding: 1rem;
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: background 0.3s;
        }

        .tab-btn:hover { background: rgba(255,255,255,0.1); }
        .tab-btn.active { background: var(--accent); }

        /* Tab Content */
        .tab-content {
            display: none;
            padding: 2rem;
            animation: fadeIn 0.5s;
        }

        .tab-content.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Tool Grid */
        .tool-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .tool-card {
            background: var(--light);
            padding: 1rem;
            border-left: 4px solid var(--primary);
            border-radius: 4px;
        }

        /* Accordion for Procedures */
        .accordion {
            margin-top: 1rem;
        }

        .accordion-item {
            border-bottom: 1px solid #ddd;
        }

        .accordion-header {
            background: var(--light);
            padding: 1rem;
            width: 100%;
            text-align: left;
            border: none;
            outline: none;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .accordion-header:after {
            content: '\002B'; /* Plus sign */
            font-size: 1.2rem;
        }

        .accordion-header.active:after {
            content: '\2212'; /* Minus sign */
        }

        .accordion-body {
            padding: 0 1rem;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background: white;
        }

        /* Waveform Simulation Section */
        .waveform-box {
            background: #000;
            color: #0f0;
            padding: 1rem;
            font-family: monospace;
            border-radius: 4px;
            margin: 1rem 0;
            position: relative;
            height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #555;
        }
        
        .waveform-line {
            width: 90%;
            height: 2px;
            background: #0f0;
            box-shadow: 0 0 5px #0f0;
            position: absolute;
        }

        /* Quiz Styles */
        .quiz-option {
            display: block;
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #ddd;
            background: #f9f9f9;
            cursor: pointer;
            text-align: left;
        }

        .quiz-option:hover { background: #eee; }
        
        .quiz-feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            display: none;
        }
        .correct { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .incorrect { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }

        /* Footer */
        footer {
            text-align: center;
            padding: 2rem;
            font-size: 0.9rem;
            color: #666;
        }
    </style>
</head>
<body>

<header>
    <h1>Ignition System Diagnostics</h1>
    <p>Technician Level Training Module • Diagnosis & Troubleshooting</p>
</header>

<div class="container">
    <div class="tabs">
        <button class="tab-btn active" onclick="openTab(event, 'tools')">1. Tools & Prep</button>
        <button class="tab-btn" onclick="openTab(event, 'basic')">2. Basic Tests</button>
        <button class="tab-btn" onclick="openTab(event, 'scope')">3. Oscilloscope</button>
        <button class="tab-btn" onclick="openTab(event, 'quiz')">4. Knowledge Check</button>
    </div>

    <div id="tools" class="tab-content active">
        <h2>Required Equipment</h2>
        <p>Before beginning diagnosis, ensure you have the following specialized tools.</p>
        
        <div class="tool-grid">
            <div class="tool-card">
                <strong>OBD-II Scan Tool</strong>
                <p>For retrieving P0300-P0308 misfire codes and live fuel trim data.</p>
            </div>
            <div class="tool-card">
                <strong>HEI Spark Tester</strong>
                <p>Adjustable gap tester to put the coil under realistic load (unlike inline light testers).</p>
            </div>
            <div class="tool-card">
                <strong>Digital Multimeter (DMM)</strong>
                <p>Essential for verifying battery voltage (B+), grounds, and sensor resistance.</p>
            </div>
            <div class="tool-card">
                <strong>Oscilloscope</strong>
                <p>Visualizes electrical signals over time to catch intermittent faults and analyze burn time.</p>
            </div>
        </div>
    </div>

    <div id="basic" class="tab-content">
        <h2>Phase 1 & 2: Preliminary & Electrical</h2>
        <p>Click the headers below to reveal the diagnostic steps.</p>

        <div class="accordion">
            <div class="accordion-item">
                <button class="accordion-header">1. Visual Inspection & Codes</button>
                <div class="accordion-body">
                    <p><strong>Look for:</strong> Cracked coils, oil in spark plug wells, or rodent damage.</p>
                    <p><strong>Scan Codes:</strong> Focus on P030x (Misfire) or P035x (Coil Circuit). <br><em>Note: P035x indicates an electrical circuit fault, not usually a plug issue.</em></p>
                </div>
            </div>

            <div class="accordion-item">
                <button class="accordion-header">2. The "Swap" Test</button>
                <div class="accordion-body">
                    <p><strong>Procedure:</strong> If Cylinder 1 is misfiring, swap the coil with Cylinder 2.</p>
                    <ul>
                        <li>If misfire moves to Cyl 2 → <strong>Bad Coil.</strong></li>
                        <li>If misfire stays on Cyl 1 → <strong>Spark plug, wiring, or mechanical issue.</strong></li>
                    </ul>
                </div>
            </div>

            <div class="accordion-item">
                <button class="accordion-header">3. Power & Ground Verification</button>
                <div class="accordion-body">
                    <p>Using a multimeter on the coil connector (Key On Engine Off):</p>
                    <ul>
                        <li><strong>Power (B+):</strong> Must show battery voltage (~12V).</li>
                        <li><strong>Ground:</strong> Must show continuity to chassis (< 0.1 ohms).</li>
                        <li><strong>Signal:</strong> Pulsing 5V or 12V square wave (check while cranking).</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div id="scope" class="tab-content">
        <h2>Phase 3: Advanced Scope Analysis</h2>
        <p>The oscilloscope allows us to "see" electricity. We look at the Primary (Current) and Secondary (Voltage) waveforms.</p>

        <h3>1. Primary Current Ramp</h3>
        <div class="waveform-box">
             <svg width="100%" height="100%" viewBox="0 0 300 100">
                 <path d="M10,90 L200,10 L200,90 Z" fill="none" stroke="#0f0" stroke-width="2"/>
                 <text x="220" y="50" fill="#0f0" font-family="monospace">Current Ramp</text>
             </svg>
        </div>
        <ul>
            <li><strong>Vertical rise immediately?</strong> Shorted internal windings.</li>
            <li><strong>Flat line?</strong> Open circuit (blown fuse).</li>
        </ul>

        <h3>2. Secondary Voltage (The Firing Line)</h3>
        <div class="waveform-box">
            <svg width="100%" height="100%" viewBox="0 0 300 150">
                <line x1="50" y1="130" x2="50" y2="20" stroke="#0f0" stroke-width="2" />
                <line x1="50" y1="80" x2="150" y2="80" stroke="#0f0" stroke-width="2" />
                <path d="M150,80 Q160,130 170,80 T190,80 T210,80" fill="none" stroke="#0f0" stroke-width="2"/>
            </svg>
        </div>
        <p><strong>Key Diagnostics:</strong></p>
        <ul>
            <li><strong>Firing Line Too High:</strong> High resistance (Worn plug, wide gap).</li>
            <li><strong>Spark Line Too Short (< 0.8ms):</strong> Energy draining too fast (Fouled plug or weak coil).</li>
            <li><strong>No Oscillations at end:</strong> Shorted coil (energy not ringing out).</li>
        </ul>
    </div>

    <div id="quiz" class="tab-content">
        <h2>Knowledge Check</h2>
        
        <div class="quiz-item">
            <p><strong>1. You perform a swap test. The misfire stays on the original cylinder. What is the most likely conclusion?</strong></p>
            <button class="quiz-option" onclick="checkAnswer(this, false)">The Ignition Coil is definitely bad.</button>
            <button class="quiz-option" onclick="checkAnswer(this, true)">The coil is good; the issue is the plug, injector, or compression.</button>
            <button class="quiz-option" onclick="checkAnswer(this, false)">The ECU is faulty.</button>
            <div class="quiz-feedback"></div>
        </div>

        <br>

        <div class="quiz-item">
            <p><strong>2. On an oscilloscope, you see a very short "Spark Line" duration (less than 0.8ms). What does this indicate?</strong></p>
            <button class="quiz-option" onclick="checkAnswer(this, false)">The spark plug gap is too wide.</button>
            <button class="quiz-option" onclick="checkAnswer(this, true)">Fouled plug (short) or weak coil energy.</button>
            <button class="quiz-option" onclick="checkAnswer(this, false)">Perfect operation.</button>
            <div class="quiz-feedback"></div>
        </div>
    </div>
</div>

<footer>
    <p>Automotive Technician Training Series | Created by Gemini</p>
</footer>

<script>
    // Tab Logic
    function openTab(evt, tabName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tab-content");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
            tabcontent[i].classList.remove("active");
        }
        tablinks = document.getElementsByClassName("tab-btn");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " active";
        
        // Add fade animation class
        document.getElementById(tabName).classList.add("active");
    }

    // Accordion Logic
    var acc = document.getElementsByClassName("accordion-header");
    for (var i = 0; i < acc.length; i++) {
        acc[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var panel = this.nextElementSibling;
            if (panel.style.maxHeight) {
                panel.style.maxHeight = null;
            } else {
                panel.style.maxHeight = panel.scrollHeight + "px";
            } 
        });
    }

    // Quiz Logic
    function checkAnswer(btn, isCorrect) {
        var parent = btn.parentElement;
        var feedback = parent.querySelector(".quiz-feedback");
        
        // Reset styles for siblings
        var siblings = parent.getElementsByClassName("quiz-option");
        for(var i=0; i<siblings.length; i++) {
            siblings[i].style.background = "#f9f9f9";
            siblings[i].disabled = true; // Disable further clicks
        }

        feedback.style.display = "block";
        
        if (isCorrect) {
            btn.style.background = "#d4edda";
            feedback.innerHTML = "<strong>Correct!</strong> Great job diagnosing the issue.";
            feedback.className = "quiz-feedback correct";
        } else {
            btn.style.background = "#f8d7da";
            feedback.innerHTML = "<strong>Incorrect.</strong> Review the 'Basic Tests' or 'Oscilloscope' tabs.";
            feedback.className = "quiz-feedback incorrect";
        }
    }
</script>

</body>
</html>
